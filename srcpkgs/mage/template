# Template file for 'mage'
pkgname=mage
version=1.10.0
revision=1
build_style=go
go_import_path=github.com/magefile/${pkgname}
_commit=9a10961401323a8a888d46e35d5a59d7433e092b
short_desc="Make/Rake-like dev tool using Go"
maintainer="Gabriel Sanches <gabriel@gsr.dev>"
license="Apache-2.0"
homepage="https://magefile.org/"
distfiles="https://github.com/magefile/${pkgname}/archive/v${version}.tar.gz"
checksum=7d7f46f62df9dfb1a3a03173a1c14d77fdc53b3c99821da02d32a4ba730838fe

pre_build() {
	build_date=$(command date --rfc-3339=seconds)
	go_ldflags="-X \"${go_import_path}/${pkgname}.timestamp=${build_date}\" \
	            -X \"${go_import_path}/${pkgname}.commitHash=${_commit}\" \
	            -X \"${go_import_path}/${pkgname}.gitTag=v${version}\""
}
